/* --------- Design Tokens (CSS Custom Properties) --------- */
:root{
  --blue: #1976D2;               /* Professional Blue */
  --green: #00C851;              /* Safety Green */
  --amber: #FF8800;              /* Warning Amber */
  --red: #FF3547;                /* Critical Red */
  --ink: #0b0f14;                /* Base text on light */
  --bg: #ffffff;                 /* App background */
  --card: #f6f8fb;               /* Card background */
  --muted: #6b7a90;              /* Secondary text */
  --border: #e3e8f0;             /* Hairlines */
  --focus: #5aa9ff;              /* Focus ring */
  --shadow: 0 4px 16px rgba(0,0,0,.08);

  --radius-xl: 20px;
  --radius-lg: 14px;
  --radius-md: 10px;

  --tap: 48px;                   /* Minimum touch target */
  --tap-lg: 56px;                /* Emergency */

  --safe: var(--green);
  --warn: var(--amber);
  --crit: var(--red);

  --font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Inter, "Helvetica Neue", Arial, system-ui, "Apple Color Emoji", "Segoe UI Emoji";
}

@media (prefers-color-scheme: dark){
  :root{
    --bg: #0e1217;
    --card: #121923;
    --ink: #f2f5f8;
    --muted: #9db0c6;
    --border: #2a3442;
    --shadow: 0 6px 24px rgba(0,0,0,.4);
  }
}

/* High-contrast mode helper */
@media (prefers-contrast: more){
  :root{ --focus: #ffffff; }
}

/* --------- Base --------- */
html,body{height:100%}
body{
  margin:0; 
  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  color:var(--ink); font:16px/1.3 var(--font);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  display:flex; flex-direction:column; min-height:100dvh;
}
*{box-sizing:border-box}
:focus-visible{ outline: 3px solid var(--focus); outline-offset: 2px; border-radius: 8px; }
* {
  -webkit-tap-highlight-color: transparent;
}

.app{display:flex; flex-direction:column; height:100%; max-width: 28rem; margin: 0 auto;}

/* Top app bar */
.topbar{
  position:sticky; top:0; z-index:5; 
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  display:flex; align-items:center; gap:8px; padding:12px 16px; 
  border-bottom:1px solid rgba(227, 232, 240, 0.8);
  box-shadow: 0 2px 16px rgba(0, 0, 0, 0.1);
}
.brand{ display:flex; align-items:center; gap:10px; }
.brand .logo{ width:28px; height:28px; border-radius:8px; background:linear-gradient(145deg,var(--blue),#42a5f5); box-shadow: var(--shadow); position:relative; }
.brand .logo:after{ content:""; position:absolute; inset:6px; border-radius:6px; background:radial-gradient(circle at 30% 30%, #fff6, #0000); }
.brand .title{ font-weight:700; letter-spacing:.2px; }
.status-pill{ margin-left:auto; font-size:12px; padding:6px 10px; border-radius:999px; background:var(--card); border:1px solid var(--border); color:var(--muted); display:flex; align-items:center; gap:8px; }
.dot{ width:8px; height:8px; border-radius:50%; background:var(--amber); box-shadow:0 0 0 3px #0000; }
.dot.online{ background:var(--green); }
.dot.offline{ background:var(--red); }

/* Emergency banner */
.banner{ position:sticky; top:56px; z-index:6; display:none; }
.banner.active{ display:block; }
.banner .card{
  margin:8px 12px; border-radius:16px; padding:12px; color:#fff; box-shadow: var(--shadow);
  display:flex; align-items:center; justify-content:space-between;
}
.banner.critical .card{ background:var(--red); }
.banner.warning .card{ background:var(--amber); color:#1a1a1a; }
.banner.safe .card{ background:var(--green); }
.banner .msg{ font-weight:700; }
.banner .actions{ display:flex; gap:8px; }
.btn{ -webkit-tap-highlight-color: transparent; user-select:none; cursor:pointer; border:0; border-radius:12px; padding:12px 14px; font-weight:600; background:var(--blue); color:#fff; box-shadow: var(--shadow); }
.btn.secondary{ background: #ffffff; color:#0f1720; }
.btn.ghost{ background:transparent; color:#fff; box-shadow:none; border: 2px solid #fff; }
.btn.block{ width:100%; }
.btn.lg{ min-height: var(--tap-lg); font-size:18px; border-radius: 18px; }

/* Content */
main{ flex:1; overflow:auto; scroll-behavior:smooth; padding: 8px 0; }
section[role="tabpanel"]{ display:none; padding:4px; }
section[role="tabpanel"].active{ display:block; }

.card{ 
  background: rgba(255, 255, 255, 0.95); 
  backdrop-filter: blur(16px); 
  -webkit-backdrop-filter: blur(16px); 
  border: 1px solid rgba(227, 232, 240, 0.8); 
  border-radius: var(--radius-xl); 
  padding: 16px; 
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1); 
  margin: 12px;
}

/* Dashboard layout */
.gauge-wrap{ display:grid; grid-template-columns:1fr; gap:12px; }
.gauge-card{ display:flex; flex-direction:column; align-items:center; justify-content:center; padding:16px; }
.gauge{ width:min(86vw,420px); height:min(86vw,420px); position:relative; }
.gauge canvas{ width:100%; height:100%; }
.gauge .readout{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; flex-direction:column; gap:4px; }
.ppm{ font-size: clamp(36px, 10vw, 56px); font-weight:800; letter-spacing:-.5px; }
.label{ font-size:14px; color:var(--muted); }

.grid{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.kv{ display:flex; flex-direction:column; gap:4px; }
.kv .k{ font-size:12px; color:var(--muted); }
.kv .v{ font-weight:700; }

.sos{ margin-top:8px; }

/* Alerts */
.alert{ display:flex; align-items:flex-start; gap:10px; padding:12px; border-radius:12px; border:1px solid var(--border); background:var(--card); }
.alert .badge{ width:10px; height:10px; border-radius:50%; margin-top:4px; }
.alert .content{ flex:1; }
.alert .title{ font-weight:700; }
.alert .meta{ font-size:12px; color:var(--muted); }

/* Analytics */
.chart{ width:100%; aspect-ratio: 16/9; background:var(--card); border:1px solid var(--border); border-radius:var(--radius-xl); box-shadow:var(--shadow); position:relative; }
.chart canvas{ width:100%; height:100%; }

/* Device */
.device-list{ display:flex; flex-direction:column; gap:10px; }

/* Settings */
.field{ display:flex; flex-direction:column; gap:6px; margin-bottom:12px; }
.row{ display:flex; gap:10px; align-items:center; }
.switch{ appearance:none; width:56px; height:32px; border-radius:999px; position:relative; background:#c7d1df; outline:none; transition:.2s; border:1px solid var(--border); }
.switch:checked{ background:color-mix(in oklab, var(--blue) 60%, white); }
.switch:before{ content:""; position:absolute; top:3px; left:3px; width:26px; height:26px; border-radius:50%; background:#fff; transition:.2s; box-shadow: var(--shadow); }
.switch:checked:before{ left:27px; }

input[type="range"]{ width:100%; }
input, select{ font:inherit; padding:12px; border-radius:12px; border:1px solid var(--border); background:var(--bg); color:var(--ink); }

/* Bottom nav */
.tabbar{ 
  position:sticky; bottom:0; 
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-top: 1px solid rgba(227, 232, 240, 0.8); 
  box-shadow: 0 -2px 16px rgba(0, 0, 0, 0.1);
  display:grid; grid-template-columns:repeat(4,1fr); 
}
.tab{ -webkit-tap-highlight-color:transparent; height:64px; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:4px; color:var(--muted); font-size:12px; }
.tab[aria-selected="true"]{ color:var(--blue); font-weight:700; }

/* Skeletons */
.skeleton{ position:relative; overflow:hidden; background:linear-gradient(90deg, #0000, #ffffff20, #0000), var(--card); border-radius:12px; height:14px; }

/* Toast */
.toast{ position:fixed; left:50%; bottom:88px; transform:translateX(-50%); background:var(--ink); color:var(--bg); padding:12px 14px; border-radius:12px; box-shadow:var(--shadow); display:none; z-index:50; }
.toast.show{ display:block; animation: fade 3s ease; }
@keyframes fade{ 0%{opacity:0; transform:translate(-50%,8px);} 10%{opacity:1; transform:translate(-50%,0);} 90%{opacity:1;} 100%{opacity:0;} }

/* Utilities */
.row-split{ display:flex; gap:10px; }
.row-split > *{ flex:1; }

/* React component container styling */
.min-h-screen {
  min-height: 100vh;
}

.flex {
  display: flex;
}

.flex-col {
  flex-direction: column;
}

.h-full {
  height: 100%;
}

.w-full {
  width: 100%;
}

.mx-auto {
  margin-left: auto;
  margin-right: auto;
}

.max-w-md {
  max-width: 28rem;
}

.p-4 {
  padding: 1rem;
}

.p-2 {
  padding: 0.5rem;
}

.mb-4 {
  margin-bottom: 1rem;
}

.mb-6 {
  margin-bottom: 1.5rem;
}

.space-y-4 > * + * {
  margin-top: 1rem;
}

.space-y-2 > * + * {
  margin-top: 0.5rem;
}

.text-center {
  text-align: center;
}

.font-bold {
  font-weight: 700;
}

.text-lg {
  font-size: 1.125rem;
}

.text-sm {
  font-size: 0.875rem;
}

.rounded-md {
  border-radius: 0.375rem;
}

.rounded-lg {
  border-radius: 0.5rem;
}

.border {
  border-width: 1px;
}

.bg-white {
  background-color: #ffffff;
}

.bg-gray-50 {
  background-color: #f9fafb;
}

.text-gray-600 {
  color: #4b5563;
}

.text-gray-900 {
  color: #111827;
}

/* Glass effect utilities */
.backdrop-blur {
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

.bg-white\/95 {
  background-color: rgba(255, 255, 255, 0.95);
}

.shadow-soft {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

/* Professional card styling */
.professional-card {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(227, 232, 240, 0.8);
  border-radius: 20px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

@media (prefers-color-scheme: dark) {
  .professional-card {
    background: rgba(18, 25, 35, 0.95);
    border: 1px solid rgba(42, 52, 66, 0.8);
  }
}